<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•ç‰©å¤§è§£å¯†ï¼šè‡ªç„¶åµæ¢ç¤¾</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", Arial, sans-serif;
            background-color: #f0f8ff;
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(#e0f7fa 2px, transparent 2px);
            background-size: 30px 30px;
        }
        .container {
            background: white; width: 95%; max-width: 900px; min-height: 650px;
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative; overflow: hidden;
            border: 5px solid #5d4037;
        }
        h1, h2, h3 { color: #3e2723; text-align: center; }
        .btn {
            display: block; width: 200px; padding: 15px; margin: 20px auto;
            background-color: #ffca28; color: #3e2723;
            border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            text-align: center; transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover { transform: scale(1.05); background-color: #ffb300; }
        .page { display: none; animation: fadeIn 0.4s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .login-form { text-align: center; margin-top: 50px; }
        .login-input-group { margin: 15px 0; }
        .login-input-group label { font-size: 1.2rem; font-weight: bold; color: #5d4037; display: inline-block; width: 60px; }
        input[type="text"] { 
            padding: 12px; font-size: 1.1rem; border-radius: 10px; 
            border: 2px solid #ccc; width: 180px; outline: none;
        }

        .map-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 30px; }
        .level-card { border: 3px solid #ccc; border-radius: 15px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .level-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .level-easy { background-color: #e8f5e9; border-color: #4caf50; }
        .level-mid { background-color: #fff3e0; border-color: #ff9800; }
        .level-hard { background-color: #ffebee; border-color: #f44336; }
        .level-completed { opacity: 0.6; position: relative; }
        .level-completed::after { content: "å·²å®Œæˆ"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 5px; }
        
        .quiz-container { text-align: center; }
        .question-box { font-size: 1.3rem; margin-bottom: 20px; background: #e3f2fd; padding: 20px; border-radius: 10px; color: #0d47a1; text-align: left; }
        .image-container { margin: 15px auto; max-width: 400px; height: 180px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; border-radius: 10px; overflow: hidden; }
        .image-container img { max-width: 100%; max-height: 100%; object-fit: contain; }
        
        .options-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .single-column .option-btn { grid-column: span 2; }
        
        .option-btn { 
            background: white; border: 2px solid #2196f3; padding: 15px; 
            border-radius: 10px; font-size: 1.05rem; cursor: pointer; 
            transition: 0.2s; text-align: left; padding-left: 20px; line-height: 1.4;
        }
        .option-btn:hover { background: #e3f2fd; border-color: #0d47a1; }
        
        .reading-text { text-align: left; background: #fdfdfd; padding: 20px; border-radius: 10px; font-size: 1.05rem; margin-bottom: 15px; border: 1px solid #ddd; border-left: 8px solid #f44336; line-height: 1.8; max-height: 300px; overflow-y: auto; color: #333; }
        
        .feedback-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; }
        .feedback-content { background: white; color: black; padding: 30px; border-radius: 15px; text-align: center; max-width: 80%; }
    </style>
</head>
<body>

<div class="container">
    <div id="page-home" class="page active">
        <h1>ğŸ•µï¸ å‹•ç‰©å¤§è§£å¯†ï¼šè‡ªç„¶åµæ¢ç¤¾</h1>
        <div style="text-align:center;">
            <img src="unnamed.jpg" alt="å°é¢é ç•™">
        </div>
        <div style="background-color: #fff8e1; padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h3>ğŸ“œ ä»»å‹™èªªæ˜ï¼š</h3>
            <p>1. ğŸ–±ï¸ ä½¿ç”¨<b>æ»‘é¼ å·¦éµ</b>é»é¸é¸é …ã€‚<br>
               2. ğŸ—ºï¸ è‡ªç”±é¸æ“‡æŒ‘æˆ°é †åºã€‚<br>
               3. ğŸ“Š é¦–å¸­åµæ¢æŒ‘æˆ°éœ€ç´°å¿ƒé–±è®€åµæ¢ç­†è¨˜å¾Œå†ä½œç­”ã€‚</p>
        </div>
        <button class="btn" onclick="goToPage('page-login')">é–‹å§‹èª¿æŸ¥</button>
    </div>

    <div id="page-login" class="page">
        <h2>ğŸ“ åµæ¢èº«åˆ†ç™»éŒ„</h2>
        <div class="login-form">
            <div class="login-input-group">
                <label>ç­ç´šï¼š</label>
                <input type="text" id="class-input" placeholder="ä¾‹å¦‚ï¼š601">
            </div>
            <div class="login-input-group">
                <label>åº§è™Ÿï¼š</label>
                <input type="text" id="seat-input" placeholder="ä¾‹å¦‚ï¼š01">
            </div>
            <button class="btn" onclick="login()">ç¢ºèªèº«åˆ†</button>
        </div>
    </div>

    <div id="page-hub" class="page">
        <div style="background: #3e2723; color: white; padding: 10px 20px; border-radius: 10px; display:flex; justify-content:space-between;">
            <span id="user-display">åµæ¢ï¼šæœªç™»å…¥</span>
            <span>ç¸½åˆ†ï¼š<span id="total-score">0</span></span>
        </div>
        <h2>ğŸ—ºï¸ é¸æ“‡èª¿æŸ¥å€åŸŸ</h2>
        <div class="map-grid">
            <div class="level-card level-easy" id="lvl-btn-easy" onclick="startLevel('easy')">
                <h3>ğŸŸ¢ æ–°æ‰‹è¨“ç·´å ´</h3><p>æ˜¯éé¡Œ (5é¡Œ)</p>
            </div>
            <div class="level-card level-mid" id="lvl-btn-mid" onclick="startLevel('mid')">
                <h3>ğŸŸ¡ æ§‹é€ ç ”ç©¶æ‰€</h3><p>é¸æ“‡é¡Œ (5é¡Œ)</p>
            </div>
            <div class="level-card level-hard" id="lvl-btn-hard" onclick="startLevel('hard')">
                <h3>ğŸ”´ é¦–å¸­åµæ¢æŒ‘æˆ°</h3><p>é–±è®€ç´ é¤Š (3é¡Œ)</p>
            </div>
        </div>
    </div>

    <div id="page-quiz" class="page">
        <div class="quiz-container">
            <h3 id="level-title">é—œå¡åç¨±</h3>
            <div id="reading-area" class="reading-text" style="display:none;"></div>
            <div class="image-container" id="img-box">
                <img id="question-image" src="" alt="">
            </div>
            <div class="question-box" id="question-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
            <div id="options-area" class="options-grid"></div>
        </div>
    </div>

    <div id="feedback" class="feedback-overlay">
        <div class="feedback-content">
            <div id="fb-title" style="font-size: 2rem; font-weight: bold; margin-bottom: 10px;"></div>
            <div id="fb-text" style="margin-bottom:20px; color:#555; text-align: left; line-height: 1.5;"></div>
            <button class="btn" onclick="nextQuestion()">ç¹¼çºŒ</button>
        </div>
    </div>

    <div id="page-result" class="page">
        <div style="text-align: center; margin-top: 50px;">
            <h2>ğŸ“Š èª¿æŸ¥å ±å‘Š</h2>
            <p style="font-size: 1.5rem;">æœ¬é—œå¾—åˆ†ï¼š<span id="level-score" style="color:red; font-weight:bold;">0</span> / 100</p>
            <p id="level-comment"></p>
            <button class="btn" onclick="goToPage('page-hub')">è¿”å›åœ°åœ–</button>
        </div>
    </div>
</div>

<script>
    function goToPage(pageId) {
        const pages = document.querySelectorAll('.page');
        pages.forEach(p => p.classList.remove('active'));
        const target = document.getElementById(pageId);
        if (target) target.classList.add('active');
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    const cnNums = ["ä¸€ã€", "äºŒã€", "ä¸‰ã€", "å››ã€", "äº”ã€"];

    const masterDb = {
        easy: [
            { q: "äººé«”çš„é‹å‹•ï¼Œä¸»è¦æ˜¯é ã€Œéª¨éª¼ã€è‡ªå·±æ”¶ç¸®ï¼Œä¾†å¸¶å‹•è‚Œè‚‰å’Œé—œç¯€æ´»å‹•çš„å—ï¼Ÿ", ansText: "X", options: ["O", "X"], img: "", note: "äººé«”å‹•ä½œæ˜¯é è‚Œè‚‰æ”¶ç¸®èˆ‡èˆ’å¼µï¼Œç”¢ç”Ÿæ‹‰åŠ›å¸¶å‹•éª¨éª¼èˆ‡é—œç¯€ã€‚" },
            { q: "èš¯èš“æ²’æœ‰éª¨éª¼å’Œé—œç¯€ï¼Œç‰ æ˜¯åˆ©ç”¨èº«é«”è‚Œè‚‰çš„æ”¶ç¸®å’Œèˆ’å¼µä¾†çˆ¬è¡Œã€‚", ansText: "O", options: ["O", "X"], img: "earthworm.jpg", note: "æ­£ç¢ºï¼èš¯èš“ä¾é èº«é«”è‚Œè‚‰ç”¢ç”Ÿçš„æ³¢æµªç‹€è •å‹•å‰é€²ã€‚" },
            { q: "æˆ‘å€‘å‘¼å‡ºçš„æ°£é«”æœƒè®“æ¾„æ¸…çŸ³ç°æ°´è®Šæ··æ¿ï¼Œä»£è¡¨å‘¼å‡ºçš„æ°£é«”å«æœ‰è¼ƒå¤šçš„æ°§æ°£ã€‚", ansText: "X", options: ["O", "X"], img: "", note: "äºŒæ°§åŒ–ç¢³æœƒä½¿æ¾„æ¸…çŸ³ç°æ°´è®Šæ··æ¿ï¼Œé€™æ˜¯æª¢é©—äºŒæ°§åŒ–ç¢³çš„æ–¹æ³•ã€‚" },
            { q: "é‡‘é­šç”Ÿæ´»åœ¨æ°´ä¸­ï¼Œç‰ å€‘æ˜¯ç”¨ã€Œè‚ºã€ä¾†å‘¼å¸ï¼Œé€²è¡Œæ°£é«”äº¤æ›ã€‚", ansText: "X", options: ["O", "X"], img: "goldfish.jpg", note: "é‡‘é­šåˆ©ç”¨é°“è“‹å¼µåˆè®“æ°´æµéé°“éƒ¨ï¼Œå¸å–æ°´ä¸­çš„æ°§ã€‚" },
            { q: "ç™¼æ˜è›™é‹çš„éˆæ„Ÿï¼Œæ˜¯ä¾†è‡ªæ–¼é’è›™è…³ä¸Šçš„è¹¼ï¼Œé€™æ˜¯ä¸€ç¨®ã€Œä»¿ç”Ÿã€çš„æ‡‰ç”¨ã€‚", ansText: "O", options: ["O", "X"], img: "", note: "æ­£ç¢ºï¼æ¨¡ä»¿ç”Ÿç‰©æ§‹é€ ç™¼æ˜å·¥å…·å°±æ˜¯ä»¿ç”Ÿç§‘æŠ€ã€‚" }
        ],
        mid: [
            { q: "æ‰‹è‡‚ç”±ä¼¸ç›´è®Šç‚ºå½æ›²æ™‚ï¼Œè‚Œè‚‰çš„é‹ä½œæƒ…æ³ç‚ºä½•ï¼Ÿ", ansText: "æ‰‹è‡‚å…§å´è‚Œè‚‰æ”¶ç¸®è®ŠçŸ­ï¼Œå¤–å´è‚Œè‚‰èˆ’å¼µè®Šé•·", options: ["æ‰‹è‡‚å…§å´è‚Œè‚‰æ”¶ç¸®è®ŠçŸ­ï¼Œå¤–å´è‚Œè‚‰èˆ’å¼µè®Šé•·", "æ‰‹è‡‚å…§å´è‚Œè‚‰èˆ’å¼µè®Šé•·ï¼Œå¤–å´è‚Œè‚‰æ”¶ç¸®è®ŠçŸ­", "å…©å´è‚Œè‚‰åŒæ™‚æ”¶ç¸®è®Šç¡¬ï¼Œæ‹‰å‹•é—œç¯€"], img: "arm.jpg", note: "è‚Œè‚‰å¿…é ˆæˆå°é‹ä½œï¼Œä¸€æ”¶ç¸®ä¸€èˆ’å¼µæ‰èƒ½æ‹‰å‹•éª¨éª¼ã€‚" },
            { q: "åµæ¢å°å¦åˆ©ç”¨ã€Œæœ‰ç„¡å››è‚¢ã€ä¾†åˆ†é¡å‹•ç‰©ï¼Œå“ªä¸€ç¨®å‹•ç‰©æœƒè¢«åˆ†åˆ°ã€Œç„¡å››è‚¢ã€çš„ä¸€çµ„ï¼Ÿ", ansText: "é‡‘é­šèˆ‡èš¯èš“", options: ["èœ¥èœ´èˆ‡è›‡", "é‡‘é­šèˆ‡èš¯èš“", "é³¥èˆ‡è™è "], img: "", note: "é‡‘é­šåˆ©ç”¨é°­ï¼Œèš¯èš“åˆ©ç”¨è‚Œè‚‰æ”¶ç¸®ã€‚èœ¥èœ´æœ‰å››è‚¢ã€‚" },
            { q: "é—œæ–¼å‹•ç‰©å‘¼å¸å™¨å®˜çš„é…å°ï¼Œä¸‹åˆ—å“ªä¸€çµ„é¸é …å®Œå…¨ã€Œæ­£ç¢ºã€ï¼Ÿ", ansText: "æ˜†èŸ²-æ°£ç®¡ã€ç‹—-è‚ºã€é­š-é°“", options: ["æ˜†èŸ²-è‚ºã€ç‹—-æ°£å­”ã€é­š-é°“", "æ˜†èŸ²-æ°£ç®¡ã€ç‹—-è‚ºã€é­š-é°“", "æ˜†èŸ²-æ°£é–€ã€ç‹—-é°“ã€é­š-æ°£ç®¡"], img: "", note: "æ˜†èŸ²é€éè…¹éƒ¨æ°£é–€é€²å…¥æ°£ç®¡å‘¼å¸ã€‚" },
            { q: "åœ¨è§€å¯Ÿå‹•ç‰©é‹å‹•æ™‚ï¼Œå“ªä¸€ç¨®å‹•ç‰©ã€Œä¸éœ€è¦ã€ä¾é éª¨éª¼æˆ–é—œç¯€çš„é…åˆï¼Ÿ", ansText: "è¸ç‰›åˆ©ç”¨æŸ”è»Ÿçš„è…¹è¶³çˆ¬è¡Œ", options: ["èœ¥èœ´åœ¨åœ°é¢å¿«é€Ÿçˆ¬è¡Œ", "è¸ç‰›åˆ©ç”¨æŸ”è»Ÿçš„è…¹è¶³çˆ¬è¡Œ", "æ–‘é³©å¼µé–‹ç¿…è†€é£›è¡Œ"], img: "", note: "è»Ÿé«”å‹•ç‰©å¦‚è¸ç‰›æ²’æœ‰å…§éƒ¨éª¨éª¼æ¶æ§‹ã€‚" },
            { q: "é—œæ–¼ä»¿ç”Ÿç§‘æŠ€çš„éˆæ„Ÿä¾†æºï¼Œå“ªä¸€å€‹ç™¼æ˜èˆ‡ç”Ÿç‰©æ§‹é€ çš„å°æ‡‰æ˜¯ã€ŒéŒ¯èª¤ã€çš„ï¼Ÿ", ansText: "èˆ¹æ§³æ˜¯æ¨¡ä»¿å¤§è±¡é•·é¼»çš„éˆæ´»æ€§", options: ["é£›æ©Ÿæ˜¯æ¨¡ä»¿é³¥é¡çš„ç¿…è†€æ§‹é€ ", "ç« é­šå¸ç›¤èˆ‡å·¥æ¥­å¸ç›¤çš„åŠŸèƒ½ç›¸ä¼¼", "èˆ¹æ§³æ˜¯æ¨¡ä»¿å¤§è±¡é•·é¼»çš„éˆæ´»æ€§"], img: "", note: "èˆ¹æ§³ä¸»è¦æ˜¯æ¨¡ä»¿é­šé¡çš„é°­æˆ–æ°´ç”Ÿå‹•ç‰©æœ‰è¹¼çš„è…³ã€‚" }
        ],
        hard: [
            { 
                type: "read", 
                q: "æ ¹æ“šåµæ¢ç­†è¨˜ï¼Œä¸‹åˆ—é—œæ–¼è¸ç‰›é‹å‹•æ©Ÿåˆ¶èˆ‡ç‰¹æ€§çš„æ•˜è¿°ï¼Œå“ªä¸€é …æœ€ç¬¦åˆæ–‡æ„ï¼Ÿ", 
                ansText: "è¸ç‰›åƒ…èƒ½åˆ©ç”¨è…¹è¶³è‚Œè‚‰å–®å‘çš„æ³¢æµªç‹€è¦å¾‹æ”¶ç¸®ä¾†ç·©æ…¢æ¨é€²ï¼Œç„¡æ³•ç”¢ç”Ÿå€’é€€çš„å‹•ä½œã€‚", 
                options: [
                    "è¸ç‰›å› ç‚ºæ²’æœ‰éª¨éª¼æ”¯æ’ï¼Œæ•…å¿…é ˆåˆ©ç”¨ç¡¬æ®¼èˆ‡è‚Œè‚‰å…±åŒæ“ºå‹•æ‰èƒ½åŠ å¿«å‰é€²é€Ÿåº¦ã€‚",
                    "è¸ç‰›åˆ†æ³Œçš„é»æ¶²é™¤äº†æ¨™ç¤ºé ˜åœ°å¤–ï¼Œæœ€ä¸»è¦çš„ç”¨é€”æ˜¯å¹«åŠ©ç‰ åœ¨å±éšªæ™‚å¿«é€Ÿé€€å¾Œèº²é¿ã€‚",
                    "è¸ç‰›åƒ…èƒ½åˆ©ç”¨è…¹è¶³è‚Œè‚‰å–®å‘çš„æ³¢æµªç‹€è¦å¾‹æ”¶ç¸®ä¾†ç·©æ…¢æ¨é€²ï¼Œç„¡æ³•ç”¢ç”Ÿå€’é€€çš„å‹•ä½œã€‚",
                    "è¸ç‰›é‹å‹•æ–¹å¼èˆ‡èš¯èš“å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯åˆ©ç”¨å…¨èº«è‚Œè‚‰ç¸®çŸ­å†æ‹‰é•·çš„æ–¹å¼ä¾†ç§»å‹•ã€‚"
                ], 
                article: "<b>ã€åµæ¢ç­†è¨˜ï¼šç‰†è§’çš„æ…¢è¡Œè€…ã€‘</b><br>åœ¨é›¨å¾Œçš„æ ¡åœ’ä¸­ï¼Œæˆ‘å€‘å¸¸èƒ½è§€å¯Ÿåˆ°èƒŒè‘—ç¡¬æ®¼ç·©æ…¢çˆ¬è¡Œçš„è¸ç‰›ã€‚å¾ç”Ÿç‰©æ§‹é€ å­¸ä¾†çœ‹ï¼Œè¸ç‰›å±¬æ–¼è»Ÿé«”å‹•ç‰©ï¼Œé«”å…§å®Œå…¨æ²’æœ‰éª¨éª¼æ”¯æ’ã€‚ç‰ ç§»å‹•çš„ç¥•å¯†åœ¨æ–¼èº«é«”ä¸‹æ–¹çš„ã€Œè…¹è¶³ã€ï¼Œé€™æ˜¯ä¸€å¡Šåšå¯¦çš„è‚Œè‚‰çµ„ç¹”ã€‚ç•¶è¸ç‰›æƒ³ç§»å‹•æ™‚ï¼Œè…¹è¶³çš„è‚Œè‚‰æœƒç”±å¾Œå¾€å‰ç”¢ç”Ÿæ³¢æµªèˆ¬çš„è¦å¾‹æ”¶ç¸®èˆ‡èˆ’å¼µï¼Œé€²è€Œå¸¶å‹•èº«é«”å‰é€²ã€‚ç‰¹åˆ¥çš„æ˜¯ï¼Œç”±æ–¼é€™ç¨®è‚Œè‚‰æ”¶ç¸®çš„æ–¹å‘æ€§ï¼Œè¸ç‰›åœ¨æ§‹é€ ä¸Šã€Œåªèƒ½å‰é€²ï¼Œç„¡æ³•å¾Œé€€ã€ã€‚æ­¤å¤–ï¼Œç‰ æœƒåˆ†æ³Œé»æ¶²æ½¤æ»‘åœ°é¢ï¼Œé€™ä¸åƒ…èƒ½ä¿è­·æŸ”è»Ÿçš„è…¹è¶³ä¸è¢«åˆ®å‚·ï¼Œé‚„èƒ½å¢åŠ çˆ¬è¡Œæ™‚çš„é™„è‘—åŠ›ã€‚", 
                note: "æ–‡ä¸­é‡é»åœ¨æ–¼è…¹è¶³è‚Œè‚‰çš„æ³¢æµªç‹€æ”¶ç¸®èˆ‡åªèƒ½å‰é€²çš„ç‰¹æ€§ã€‚" 
            },
            { 
                type: "read", 
                q: "é—œæ–¼æ°´ç”Ÿç”Ÿç‰©çš„æ°£é«”äº¤æ›æ–¹å¼ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…èˆ‡åµæ¢ç­†è¨˜çš„å…§å®¹ã€Œæœ€å»åˆã€ï¼Ÿ", 
                ansText: "é¯¨è±šé›–ç„¶ç”Ÿæ´»åœ¨æµ·ä¸­ï¼Œä½†å…¶ç”Ÿç†æ§‹é€ å±¬æ–¼å“ºä¹³é¡ï¼Œå¿…é ˆè—‰ç”±å™´æ°£å­”èˆ‡å¤§æ°£é€²è¡Œäº¤æ›ã€‚", 
                options: [
                    "ä¸è«–æ˜¯é­šé¡æˆ–é¯¨è±šï¼Œåªè¦æ˜¯é•·æœŸç”Ÿæ´»åœ¨æ°´ä¸­çš„è„Šæ¤å‹•ç‰©ï¼Œéƒ½æ˜¯åˆ©ç”¨é°“ä¾†éæ¿¾æ°§æ°£ã€‚",
                    "é¯¨è±šé›–ç„¶ç”Ÿæ´»åœ¨æµ·ä¸­ï¼Œä½†å…¶ç”Ÿç†æ§‹é€ å±¬æ–¼å“ºä¹³é¡ï¼Œå¿…é ˆè—‰ç”±å™´æ°£å­”èˆ‡å¤§æ°£é€²è¡Œäº¤æ›ã€‚",
                    "é­šé¡çš„é°“è“‹ä¸åœå¼µåˆæ˜¯ç‚ºäº†å°‡å«æ°§çš„ç©ºæ°£å¸å…¥è‚ºéƒ¨ï¼Œå†æ’å‡ºå¤šé¤˜çš„æ°´åˆ†ã€‚",
                    "é¯¨è±šåœ¨æ°´ä¸‹å¾…å¤ªä¹…æœƒæººæ°´ï¼Œæ˜¯å› ç‚ºç‰ å€‘çš„å™´æ°£å­”ç„¡æ³•åœ¨æ°´ä¸­é—œé–‰è€Œå°è‡´é€²æ°´ã€‚"
                ], 
                article: "<b>ã€åµæ¢ç­†è¨˜ï¼šæ°´ä¸­çš„å‘¼å¸å¥§ç¥•ã€‘</b><br>é›–ç„¶å‹•ç‰©éƒ½ç”Ÿæ´»åœ¨æ°´ä¸­ï¼Œä½†æ°£é«”äº¤æ›çš„æ–¹å¼å»å¤§ä¸ç›¸åŒã€‚é­šé¡å…·å‚™é«˜æ•ˆçš„ã€Œé°“ã€ï¼Œç•¶æ°´æµéé°“éƒ¨å¯†å¸ƒçš„å¾®è¡€ç®¡æ™‚ï¼Œæœƒå¸å–æº¶è§£åœ¨æ°´ä¸­çš„æ°§æ°£ä¸¦æ’å‡ºäºŒæ°§åŒ–ç¢³ã€‚ç„¶è€Œï¼ŒåŒæ¨£åœ¨æµ·ä¸­æ‚ æ¸¸çš„é¯¨é­šèˆ‡æµ·è±šï¼Œé›–ç„¶å¤–å½¢åƒé­šï¼Œä½†ç”Ÿç†æ§‹é€ ä¸Šå±¬æ–¼å“ºä¹³é¡ï¼Œå…·å‚™èˆ‡äººé¡ç›¸ä¼¼çš„ã€Œè‚ºã€ã€‚é€™æ„å‘³è‘—ç‰ å€‘ç„¡æ³•åˆ©ç”¨æ°´ä¸­çš„æº¶è§£æ°§ï¼Œå¿…é ˆå®šæœŸæµ®å‡ºæ°´é¢ï¼Œåˆ©ç”¨é ­é ‚çš„ã€Œå™´æ°£å­”ã€å¼·åŠ›æ’å‡ºé«”å…§çš„äºŒæ°§åŒ–ç¢³ï¼Œä¸¦è¿…é€Ÿå¸å…¥æ–°é®®çš„å¤§æ°£ã€‚é€™ç¨®é©æ‡‰æ°´ç”Ÿç”Ÿæ´»çš„æ›æ°£æ©Ÿåˆ¶ï¼Œæ˜¯ç”Ÿç‰©æ¼”åŒ–ä¸Šçš„å¥‡å¦™è¡¨ç¾ã€‚", 
                note: "é‡é»åœ¨æ–¼å€åˆ†é­šé¡ï¼ˆé°“å‘¼å¸ï¼‰èˆ‡å“ºä¹³é¡é¯¨è±šï¼ˆè‚ºå‘¼å¸ï¼‰çš„å·®ç•°ã€‚" 
            },
            { 
                type: "read", 
                q: "æ ¹æ“šé€™å‰‡ç­†è¨˜ï¼Œæˆ‘å€‘è©²å¦‚ä½•æœ€æ­£ç¢ºåœ°å®šç¾©ã€Œä»¿ç”Ÿç§‘æŠ€ (Biomimicry)ã€ï¼Ÿ", 
                ansText: "é€™æ˜¯ä¸€é–€è·¨å­¸ç§‘æŠ€è¡“ï¼Œæ—¨åœ¨æ·±å…¥è§€å¯Ÿç”Ÿç‰©çš„ç‰¹æ®Šç‰©ç†æ§‹é€ æˆ–è¡Œç‚ºæ¨¡å¼ï¼Œä¸¦å°‡å…¶åŸç†æ‡‰ç”¨æ–¼äººé¡å·¥å…·çš„ç ”ç™¼ä¸­ã€‚", 
                options: [
                    "é€™æ˜¯ä¸€é–€å°ˆé–€ç ”ç©¶å¦‚ä½•è£½ä½œèˆ‡çœŸå¯¦å‹•ç‰©å¤–è²Œä¸€æ¨¡ä¸€æ¨£çš„æ¨¡å‹ï¼Œä»¥ä¾›åšç‰©é¤¨æ•™è‚²å±•ç¤ºçš„ç§‘å­¸ã€‚",
                    "ä»¿ç”Ÿç§‘æŠ€åƒ…é™æ–¼æ¨¡ä»¿é³¥é¡çš„ç¿…è†€ä¾†ç™¼æ˜é£›è¡Œå™¨ï¼Œæˆ–æ˜¯æ¨¡ä»¿é­šé¡çš„å°¾é°­ä¾†æ”¹å–„èˆ¹èˆ¶èˆªè¡Œé€Ÿåº¦ã€‚",
                    "é€™æ˜¯ä¸€é–€è·¨å­¸ç§‘æŠ€è¡“ï¼Œæ—¨åœ¨æ·±å…¥è§€å¯Ÿç”Ÿç‰©çš„ç‰¹æ®Šç‰©ç†æ§‹é€ æˆ–è¡Œç‚ºæ¨¡å¼ï¼Œä¸¦å°‡å…¶åŸç†æ‡‰ç”¨æ–¼äººé¡å·¥å…·çš„ç ”ç™¼ä¸­ã€‚",
                    "åªè¦æ˜¯èˆ‡å¤§è‡ªç„¶ç’°å¢ƒæœ‰é—œçš„ç™¼æ˜ï¼Œä¾‹å¦‚åˆ©ç”¨å¤ªé™½å…‰ç™¼é›»æˆ–é¢¨åŠ›ç™¼é›»ï¼Œéƒ½å¯ä»¥è¢«ç¨±ç‚ºä»¿ç”Ÿç§‘æŠ€ã€‚"
                ], 
                article: "<b>ã€åµæ¢ç­†è¨˜ï¼šå‘è‡ªç„¶ç•Œå–ç¶“ã€‘</b><br>äººé¡åœ¨ç§‘æŠ€ç ”ç™¼çš„éç¨‹ä¸­ï¼Œå¸¸æœƒå›é ­è§€å¯Ÿå¤§è‡ªç„¶é€™å€‹ã€Œæœ€ä½³è¨­è¨ˆå¸«ã€ã€‚æ‰€è¬‚ã€Œä»¿ç”Ÿ (Biomimicry)ã€ï¼Œå…¶æ ¸å¿ƒå®šç¾©ä¸¦éåªæ˜¯å–®ç´”åœ¨å¤–å½¢ä¸Šæ¨¡ä»¿ç”Ÿç‰©ï¼Œè€Œæ˜¯æ›´æ·±å±¤åœ°æ¢è¨ç”Ÿç‰©ç‰¹æ®Šçš„èº«é«”æ§‹é€ åŸç†æˆ–å…¶ç¨ç‰¹çš„é‹å‹•æ¨¡å¼ã€‚ä¾‹å¦‚ï¼šç™¼æ˜å®¶è§€å¯Ÿé’è›™è…³è¶¾é–“çš„ã€Œè¹¼ã€ï¼Œç†è§£å…¶èƒ½å¢åŠ æ¨æ°´é¢ç©çš„åŸç†ï¼Œé€²è€Œç™¼æ˜äº†åŠ©æ³³çš„ã€Œè›™é‹ã€ï¼›ç§‘å­¸å®¶è§€å¯Ÿç« é­šè§¸æ‰‹ä¸Šã€Œå¸ç›¤ã€å½¢æˆçš„å£“åŠ›å·®ï¼Œç ”ç™¼å‡ºèƒ½å¸é™„é‡ç‰©çš„å·¥æ¥­ç”¨å¸ç›¤ã€‚é€™ç¨®ã€Œå¾è‡ªç„¶ç”Ÿç‰©ä¸­ç²å¾—éˆæ„Ÿä¸¦è½‰åŒ–ç‚ºå¯¦ç”¨ç§‘æŠ€ã€çš„éç¨‹ï¼Œå°±æ˜¯ä»¿ç”Ÿç§‘æŠ€çš„åƒ¹å€¼æ‰€åœ¨ã€‚", 
                note: "ä»¿ç”Ÿç§‘æŠ€çš„æ ¸å¿ƒåœ¨æ–¼æ¨¡ä»¿ã€Œæ§‹é€ åŸç†ã€èˆ‡ã€Œè¡Œç‚ºæ–¹å¼ã€ã€‚" 
            }
        ]
    };

    let currentUser = { class: "", seat: "" }, currentLevel = "", questionIndex = 0, score = 0, totalScore = 0, completedLevels = [], currentQuizSet = [];

    function login() {
        const clsValue = document.getElementById('class-input').value;
        const seatValue = document.getElementById('seat-input').value;
        if (!clsValue || !seatValue) { alert("è«‹å¡«å¯«ç­ç´šå’Œåº§è™Ÿï¼"); return; }
        currentUser.class = clsValue; currentUser.seat = seatValue;
        document.getElementById('user-display').innerText = `åµæ¢ï¼š${clsValue} ç­ ${seatValue} è™Ÿ`;
        goToPage('page-hub');
    }

    function startLevel(lvl) {
        currentLevel = lvl; questionIndex = 0; score = 0;
        currentQuizSet = shuffleArray([...masterDb[lvl]]);
        document.getElementById('level-title').innerText = lvl==='easy'?"ğŸŸ¢ æ–°æ‰‹è¨“ç·´å ´":lvl==='mid'?"ğŸŸ¡ æ§‹é€ ç ”ç©¶æ‰€":"ğŸ”´ é¦–å¸­åµæ¢æŒ‘æˆ°";
        goToPage('page-quiz'); 
        renderQuestion();
    }

    function renderQuestion() {
        const qData = currentQuizSet[questionIndex];
        const qText = document.getElementById('question-text');
        const qImg = document.getElementById('question-image');
        const optArea = document.getElementById('options-area');
        const readArea = document.getElementById('reading-area');
        const imgBox = document.getElementById('img-box');

        optArea.innerHTML = ""; 
        readArea.style.display = "none"; 
        
        if (currentLevel === 'mid' || currentLevel === 'hard') {
            optArea.classList.add('single-column');
        } else {
            optArea.classList.remove('single-column');
        }
        
        qText.innerText = (cnNums[questionIndex] || (questionIndex + 1) + "ã€") + qData.q;

        if (qData.type === 'read') {
            readArea.style.display = "block"; 
            readArea.innerHTML = qData.article;
            imgBox.style.display = "none";
        } else {
            imgBox.style.display = "flex"; 
            if(qData.img) {
                qImg.src = qData.img;
            } else {
                qImg.src = "https://placehold.co/400x200/f0f0f0/f0f0f0?text=åœ–ç‰‡è¼‰å…¥ä¸­";
            }
        }

        let displayOptions;
        if (currentLevel === 'easy') {
            displayOptions = ["O", "X"];
        } else {
            displayOptions = shuffleArray([...qData.options]);
        }

        displayOptions.forEach((optText, index) => {
            const btn = document.createElement('div'); 
            btn.className = 'option-btn';
            const displayLabel = (currentLevel === 'mid' || currentLevel === 'hard') ? (index + 1) + ". " : "";
            btn.innerText = displayLabel + optText; 
            btn.onclick = () => checkAnswer(optText, qData.ansText, qData.note);
            optArea.appendChild(btn);
        });
    }

    function checkAnswer(selectedText, correctText, note) {
        // å„ªåŒ–åˆ¤æ–·é‚è¼¯ï¼šç§»é™¤é¸é …ç·¨è™Ÿèˆ‡ç©ºç™½å¾Œå†æ¯”å°
        const cleanSelected = selectedText.replace(/^\d+\.\s*/, "").trim();
        const cleanCorrect = correctText.trim();
        
        const isCorrect = cleanSelected === cleanCorrect;
        const fbTitle = document.getElementById('fb-title');
        const fbText = document.getElementById('fb-text');

        if (isCorrect) {
            score += (currentLevel === 'hard' ? 34 : 20);
            fbTitle.innerText = "â­• ä»»å‹™é”æˆï¼"; 
            fbTitle.style.color = "#4caf50";
            fbText.innerHTML = `<b>ã€åˆ†æå ±å‘Šã€‘</b><br>${note}`;
        } else {
            fbTitle.innerText = "âŒ åµæ¸¬å¤±èª¤ï¼"; 
            fbTitle.style.color = "#f44336";
            fbText.innerHTML = `æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š<br><b>${correctText}</b><br><br><b>ã€çŸ¥è­˜è£œå¸–ã€‘</b><br>${note}`;
        }
        document.getElementById('feedback').style.display = "flex";
    }

    function nextQuestion() {
        document.getElementById('feedback').style.display = 'none';
        questionIndex++;
        if (questionIndex < currentQuizSet.length) renderQuestion();
        else endLevel();
    }

    function endLevel() {
        if (score > 100) score = 100;
        if (!completedLevels.includes(currentLevel)) {
            totalScore += score; 
            completedLevels.push(currentLevel);
            document.getElementById(`lvl-btn-${currentLevel}`).classList.add('level-completed');
        }
        document.getElementById('total-score').innerText = totalScore;
        document.getElementById('level-score').innerText = score;
        document.getElementById('level-comment').innerText = score >= 80 ? "ğŸŒŸ å‚‘å‡ºçš„èª¿æŸ¥ï¼Œä½ å°å‹•ç‰©æ§‹é€ ç­è‹¥æŒ‡æŒï¼" : "ğŸ’ª å†ç´°å¿ƒä¸€é»ï¼Œè‡ªç„¶ç•Œçš„ç¥•å¯†ç­‰ä½ å»ç™¼ç¾ï¼";
        goToPage('page-result');
    }
</script>

</body>
</html>

